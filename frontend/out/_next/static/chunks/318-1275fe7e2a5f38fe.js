"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[318],{891:function(e,s,t){t.d(s,{Z:function(){return v}});var r=t(7437),a=t(2265),n=t(9501),i=t(3590),l=t(7119),c=t(2869),o=t(5186),d=t(6070),x=t(5613),u=t(5974),m=t(4972),h=t(6362),p=t(7769),f=t(2208),g=t(5863),j=t(2252),b=t(5302),y=t(7992);let N=l.Ry({apiKey:l.Z_().min(1,"API key is required").regex(/^AI[A-Za-z0-9_-]+$/,"Invalid Gemini API key format")});function v(e){let{onNext:s,onBack:t}=e,[l,v]=(0,a.useState)(!1),[w,k]=(0,a.useState)(!1),[S,C]=(0,a.useState)(!1),[A,I]=(0,a.useState)(null),{toast:Z}=(0,y.pm)(),{register:D,handleSubmit:T,formState:{errors:O},watch:z}=(0,n.cI)({resolver:(0,i.F)(N)}),_=z("apiKey"),G=async e=>{v(!0),I(null);try{let s=await fetch("".concat("https://expenseai-production.up.railway.app","/api/user/gemini-api-key"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:"temp-user-id",api_key:e})}),t=await s.json();if(!s.ok)throw Error(t.message||"API key validation failed");k(!0),Z({title:"Gemini AI configured!",description:"Your API key has been validated and saved securely."})}catch(s){let e=s instanceof Error?s.message:"Validation failed";I(e),Z({title:"Validation failed",description:e,variant:"destructive"})}finally{v(!1)}},E=async e=>{await G(e.apiKey)};return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)(d.Zb,{className:"border-purple-200 bg-purple-50/50",children:[(0,r.jsx)(d.Ol,{children:(0,r.jsxs)(d.ll,{className:"text-lg flex items-center gap-2",children:[(0,r.jsx)(m.Z,{className:"h-6 w-6 text-purple-600"}),"Get Your Gemini AI API Key"]})}),(0,r.jsxs)(d.aY,{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{className:"flex items-start gap-3",children:[(0,r.jsx)(u.C,{className:"bg-purple-600 text-white min-w-[24px] h-6 flex items-center justify-center text-xs",children:"1"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-medium",children:"Visit Google AI Studio"}),(0,r.jsxs)("p",{className:"text-sm text-gray-600",children:["Go to"," ",(0,r.jsxs)("a",{href:"https://makersuite.google.com/app/apikey",target:"_blank",rel:"noopener noreferrer",className:"text-purple-600 hover:underline inline-flex items-center gap-1",children:["Google AI Studio ",(0,r.jsx)(h.Z,{className:"h-3 w-3"})]})," ","to get your free API key"]})]})]}),(0,r.jsxs)("div",{className:"flex items-start gap-3",children:[(0,r.jsx)(u.C,{className:"bg-purple-600 text-white min-w-[24px] h-6 flex items-center justify-center text-xs",children:"2"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-medium",children:"Create an API key"}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:'Click "Create API key" and select your Google Cloud project'})]})]}),(0,r.jsxs)("div",{className:"flex items-start gap-3",children:[(0,r.jsx)(u.C,{className:"bg-purple-600 text-white min-w-[24px] h-6 flex items-center justify-center text-xs",children:"3"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-medium",children:"Copy your API key"}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:'Your key will start with "AI" followed by random characters'})]})]})]}),(0,r.jsxs)("div",{className:"mt-4 p-3 bg-white/60 rounded-lg border",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-800 mb-2",children:"What Gemini AI will do:"}),(0,r.jsxs)("ul",{className:"text-sm text-gray-600 space-y-1",children:[(0,r.jsxs)("li",{children:["\uD83D\uDCF8 ",(0,r.jsx)("strong",{children:"Receipt OCR:"})," Extract store names, items, and prices from photos"]}),(0,r.jsxs)("li",{children:["\uD83C\uDFF7️ ",(0,r.jsx)("strong",{children:"Smart Categorization:"})," Automatically categorize expenses (groceries, dining, etc.)"]}),(0,r.jsxs)("li",{children:["\uD83D\uDCAC ",(0,r.jsx)("strong",{children:"Natural Language:"})," Understand your expense questions and provide insights"]}),(0,r.jsxs)("li",{children:["\uD83D\uDCCA ",(0,r.jsx)("strong",{children:"Data Formatting:"})," Structure data perfectly for Google Sheets"]})]})]})]})]}),(0,r.jsxs)(d.Zb,{children:[(0,r.jsxs)(d.Ol,{children:[(0,r.jsx)(d.ll,{children:"Enter Your Gemini API Key"}),(0,r.jsx)(d.SZ,{children:"Your API key is encrypted and stored securely"})]}),(0,r.jsx)(d.aY,{children:(0,r.jsxs)("form",{onSubmit:T(E),className:"space-y-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{htmlFor:"apiKey",className:"text-sm font-medium",children:"Gemini API Key"}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(o.I,{id:"apiKey",type:S?"text":"password",placeholder:"AIza...",...D("apiKey"),className:"pr-10 ".concat(O.apiKey?"border-red-500":"")}),(0,r.jsx)(c.z,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>C(!S),children:S?(0,r.jsx)(p.Z,{className:"h-4 w-4"}):(0,r.jsx)(f.Z,{className:"h-4 w-4"})})]}),O.apiKey&&(0,r.jsx)("p",{className:"text-sm text-red-500",children:O.apiKey.message})]}),l&&(0,r.jsxs)(x.bZ,{children:[(0,r.jsx)(g.Z,{className:"h-4 w-4 animate-spin"}),(0,r.jsx)(x.X,{children:"Testing your API key with Gemini AI..."})]}),A&&(0,r.jsxs)(x.bZ,{variant:"destructive",children:[(0,r.jsx)(j.Z,{className:"h-4 w-4"}),(0,r.jsx)(x.X,{children:A})]}),w&&(0,r.jsxs)(x.bZ,{className:"border-green-200 bg-green-50",children:[(0,r.jsx)(b.Z,{className:"h-4 w-4 text-green-600"}),(0,r.jsxs)(x.X,{className:"text-green-800",children:[(0,r.jsx)("div",{className:"font-medium",children:"Gemini AI configured successfully!"}),(0,r.jsx)("div",{className:"text-sm mt-1",children:"Your API key has been validated and encrypted for secure storage."})]})]}),(0,r.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,r.jsx)(c.z,{type:"button",variant:"outline",onClick:t,className:"flex-1",children:"Back"}),(0,r.jsx)(c.z,{type:w?"button":"submit",onClick:w?()=>{w&&s()}:void 0,disabled:l||!_&&!w,className:"flex-1",children:l?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(g.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Validating..."]}):w?"Continue":"Validate & Save"})]})]})})]}),(0,r.jsxs)(d.Zb,{className:"border-blue-200 bg-blue-50/50",children:[(0,r.jsx)(d.Ol,{children:(0,r.jsx)(d.ll,{className:"text-lg text-blue-800",children:"\uD83D\uDCA1 Gemini AI Pricing"})}),(0,r.jsx)(d.aY,{children:(0,r.jsxs)("div",{className:"space-y-2 text-blue-700",children:[(0,r.jsxs)("p",{className:"text-sm",children:[(0,r.jsx)("strong",{children:"Free tier includes:"})," 15 requests per minute, 1,500 requests per day"]}),(0,r.jsxs)("p",{className:"text-sm",children:[(0,r.jsx)("strong",{children:"Typical usage:"})," 1 request per receipt photo + 1 request per chat question"]}),(0,r.jsxs)("p",{className:"text-sm",children:[(0,r.jsx)("strong",{children:"Cost estimate:"})," Most users stay within the free tier limits"]})]})})]}),w&&(0,r.jsxs)(d.Zb,{className:"border-green-200 bg-green-50/50",children:[(0,r.jsx)(d.Ol,{children:(0,r.jsx)(d.ll,{className:"text-lg text-green-800",children:"\uD83D\uDE80 AI Features Enabled"})}),(0,r.jsx)(d.aY,{children:(0,r.jsxs)("div",{className:"grid sm:grid-cols-2 gap-4 text-green-700",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-medium text-sm",children:"Receipt Processing"}),(0,r.jsxs)("ul",{className:"text-xs space-y-1 mt-1",children:[(0,r.jsx)("li",{children:"• Store name extraction"}),(0,r.jsx)("li",{children:"• Item-by-item breakdown"}),(0,r.jsx)("li",{children:"• Price and quantity detection"}),(0,r.jsx)("li",{children:"• Smart categorization"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-medium text-sm",children:"Natural Language Chat"}),(0,r.jsxs)("ul",{className:"text-xs space-y-1 mt-1",children:[(0,r.jsx)("li",{children:'• "How much did I spend on food?"'}),(0,r.jsx)("li",{children:'• "Show my biggest expenses"'}),(0,r.jsx)("li",{children:'• "Compare this month to last"'}),(0,r.jsx)("li",{children:'• "What\'s my average grocery bill?"'})]})]})]})})]})]})}},1345:function(e,s,t){t.d(s,{Z:function(){return g}});var r=t(7437),a=t(2265),n=t(2869),i=t(6070),l=t(5613),c=t(5974),o=t(1649),d=t(8906),x=t(1239),u=t(2252),m=t(5863),h=t(5302),p=t(6362),f=t(7992);function g(e){let{onNext:s,onBack:t}=e,[g,j]=(0,a.useState)(!1),[b,y]=(0,a.useState)(!1),[N,v]=(0,a.useState)(!1),[w,k]=(0,a.useState)(null),[S,C]=(0,a.useState)(null),{toast:A}=(0,f.pm)();(0,a.useEffect)(()=>{I()},[]);let I=async()=>{try{let e=await fetch("".concat("https://expenseai-production.up.railway.app","/api/auth/google/test"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:"temp-user-id"})});if(e.ok){let s=await e.json();y(s.success),s.sheetInfo&&k(s.sheetInfo)}}catch(e){console.log("Not connected to Google Sheets yet")}},Z=async()=>{j(!0),C(null);try{let e=await fetch("".concat("https://expenseai-production.up.railway.app","/api/auth/google?user_id=").concat("temp-user-id")),s=await e.json();if(!e.ok)throw Error(s.message||"Failed to start Google authorization");window.location.href=s.authUrl}catch(s){let e=s instanceof Error?s.message:"Authorization failed";C(e),A({title:"Authorization failed",description:e,variant:"destructive"}),j(!1)}},D=async()=>{v(!0),C(null);try{let e=await fetch("".concat("https://expenseai-production.up.railway.app","/api/auth/google/create-sheet"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:"temp-user-id",sheet_name:"AI Expense Tracker"})}),s=await e.json();if(!e.ok)throw Error(s.message||"Failed to create expense sheet");k({title:"AI Expense Tracker",url:s.sheet_url,sheet_id:s.sheet_id}),A({title:"Expense sheet created!",description:"Your Google Sheet is ready for expense tracking."})}catch(s){let e=s instanceof Error?s.message:"Sheet creation failed";C(e),A({title:"Sheet creation failed",description:e,variant:"destructive"})}finally{v(!1)}};return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)(i.Zb,{className:"border-green-200 bg-green-50/50",children:[(0,r.jsx)(i.Ol,{children:(0,r.jsxs)(i.ll,{className:"text-lg flex items-center gap-2",children:[(0,r.jsx)(o.Z,{className:"h-6 w-6 text-green-600"}),"Connect Your Google Account"]})}),(0,r.jsxs)(i.aY,{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{className:"flex items-start gap-3",children:[(0,r.jsx)(c.C,{className:"bg-green-600 text-white min-w-[24px] h-6 flex items-center justify-center text-xs",children:"1"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-medium",children:"Secure OAuth Authorization"}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"You'll be redirected to Google to authorize access to your Google Sheets"})]})]}),(0,r.jsxs)("div",{className:"flex items-start gap-3",children:[(0,r.jsx)(c.C,{className:"bg-green-600 text-white min-w-[24px] h-6 flex items-center justify-center text-xs",children:"2"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-medium",children:"Automatic Sheet Setup"}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"We'll create a dedicated expense tracking sheet with proper headers"})]})]}),(0,r.jsxs)("div",{className:"flex items-start gap-3",children:[(0,r.jsx)(c.C,{className:"bg-green-600 text-white min-w-[24px] h-6 flex items-center justify-center text-xs",children:"3"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-medium",children:"Data Privacy"}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Your expense data stays in your own Google Sheet - we never store it"})]})]})]}),(0,r.jsxs)("div",{className:"grid sm:grid-cols-3 gap-3 mt-4",children:[(0,r.jsxs)("div",{className:"text-center p-3 bg-white/60 rounded-lg border",children:[(0,r.jsx)(d.Z,{className:"h-6 w-6 text-green-600 mx-auto mb-1"}),(0,r.jsx)("p",{className:"text-xs font-medium",children:"OAuth 2.0"}),(0,r.jsx)("p",{className:"text-xs text-gray-600",children:"Secure authorization"})]}),(0,r.jsxs)("div",{className:"text-center p-3 bg-white/60 rounded-lg border",children:[(0,r.jsx)(o.Z,{className:"h-6 w-6 text-green-600 mx-auto mb-1"}),(0,r.jsx)("p",{className:"text-xs font-medium",children:"Your Data"}),(0,r.jsx)("p",{className:"text-xs text-gray-600",children:"Stays in your sheets"})]}),(0,r.jsxs)("div",{className:"text-center p-3 bg-white/60 rounded-lg border",children:[(0,r.jsx)(x.Z,{className:"h-6 w-6 text-green-600 mx-auto mb-1"}),(0,r.jsx)("p",{className:"text-xs font-medium",children:"Real-time"}),(0,r.jsx)("p",{className:"text-xs text-gray-600",children:"Instant updates"})]})]})]})]}),!b&&(0,r.jsxs)(i.Zb,{children:[(0,r.jsxs)(i.Ol,{children:[(0,r.jsx)(i.ll,{children:"Authorize Google Sheets Access"}),(0,r.jsx)(i.SZ,{children:"Connect your Google account to automatically sync expense data"})]}),(0,r.jsxs)(i.aY,{className:"space-y-4",children:[S&&(0,r.jsxs)(l.bZ,{variant:"destructive",children:[(0,r.jsx)(u.Z,{className:"h-4 w-4"}),(0,r.jsx)(l.X,{children:S})]}),(0,r.jsx)(n.z,{onClick:Z,disabled:g,className:"w-full",size:"lg",children:g?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(m.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Redirecting to Google..."]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("svg",{className:"mr-2 h-4 w-4",viewBox:"0 0 24 24",children:[(0,r.jsx)("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),(0,r.jsx)("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),(0,r.jsx)("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),(0,r.jsx)("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Connect with Google"]})}),(0,r.jsx)("div",{className:"text-center",children:(0,r.jsx)("p",{className:"text-xs text-gray-500",children:"You'll be redirected to Google to authorize access"})})]})]}),b&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(l.bZ,{className:"border-green-200 bg-green-50",children:[(0,r.jsx)(h.Z,{className:"h-4 w-4 text-green-600"}),(0,r.jsxs)(l.X,{className:"text-green-800",children:[(0,r.jsx)("div",{className:"font-medium",children:"Google Sheets connected successfully!"}),(0,r.jsx)("div",{className:"text-sm mt-1",children:"Your Google account is authorized for expense tracking."})]})]}),!w&&(0,r.jsxs)(i.Zb,{children:[(0,r.jsxs)(i.Ol,{children:[(0,r.jsx)(i.ll,{children:"Create Your Expense Sheet"}),(0,r.jsx)(i.SZ,{children:"Set up a dedicated Google Sheet for tracking your expenses"})]}),(0,r.jsx)(i.aY,{className:"space-y-4",children:(0,r.jsx)(n.z,{onClick:D,disabled:N,className:"w-full",size:"lg",children:N?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(m.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Creating expense sheet..."]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(o.Z,{className:"mr-2 h-4 w-4"}),"Create Expense Sheet"]})})})]}),w&&(0,r.jsxs)(i.Zb,{className:"border-green-200 bg-green-50/50",children:[(0,r.jsx)(i.Ol,{children:(0,r.jsx)(i.ll,{className:"text-lg text-green-800",children:"\uD83D\uDCCA Expense Sheet Ready"})}),(0,r.jsxs)(i.aY,{className:"space-y-3",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between p-3 bg-white/60 rounded-lg border",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-medium text-sm",children:w.title}),(0,r.jsx)("p",{className:"text-xs text-gray-600",children:"Google Sheets Document"})]}),(0,r.jsx)("a",{href:w.url,target:"_blank",rel:"noopener noreferrer",className:"text-green-600 hover:text-green-700",children:(0,r.jsx)(p.Z,{className:"h-4 w-4"})})]}),(0,r.jsxs)("div",{className:"text-sm text-green-700",children:[(0,r.jsx)("p",{className:"font-medium mb-1",children:"Your sheet includes:"}),(0,r.jsxs)("ul",{className:"text-xs space-y-1",children:[(0,r.jsx)("li",{children:"• Pre-formatted columns for Date, Store, Item, Category, etc."}),(0,r.jsx)("li",{children:"• Automatic data population from receipt photos"}),(0,r.jsx)("li",{children:"• Real-time updates when you use your Telegram bot"}),(0,r.jsx)("li",{children:"• Full control and ownership of your expense data"})]})]})]})]})]}),(0,r.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,r.jsx)(n.z,{type:"button",variant:"outline",onClick:t,className:"flex-1",children:"Back"}),(0,r.jsx)(n.z,{onClick:()=>{b&&s()},disabled:!b||!w,className:"flex-1",children:b&&w?"Complete Setup":"Complete Connection"})]}),b&&w&&(0,r.jsxs)(i.Zb,{className:"border-blue-200 bg-blue-50/50",children:[(0,r.jsx)(i.Ol,{children:(0,r.jsx)(i.ll,{className:"text-lg text-blue-800",children:"\uD83C\uDF89 You're All Set!"})}),(0,r.jsx)(i.aY,{children:(0,r.jsxs)("div",{className:"space-y-2 text-blue-700",children:[(0,r.jsx)("p",{className:"text-sm font-medium",children:"What you can do now:"}),(0,r.jsxs)("ul",{className:"text-xs space-y-1",children:[(0,r.jsx)("li",{children:"\uD83D\uDCF1 Send receipt photos to your Telegram bot"}),(0,r.jsx)("li",{children:"\uD83D\uDCAC Ask natural language questions about your expenses"}),(0,r.jsx)("li",{children:"\uD83D\uDCCA Watch your data automatically appear in Google Sheets"}),(0,r.jsx)("li",{children:"\uD83D\uDCC8 Track spending patterns and get AI insights"})]})]})})]})]})}},9814:function(e,s,t){t.d(s,{Z:function(){return f}});var r=t(7437),a=t(2265),n=t(2869),i=t(5186),l=t(6815),c=t(5613),o=t(6070),d=t(2222),x=t(6362),u=t(8867),m=t(5863),h=t(5302),p=t(2252);function f(e){var s;let{botToken:t,setBotToken:f,botUsername:g,setBotUsername:j,onValidationComplete:b,isLoading:y=!1}=e,[N,v]=(0,a.useState)(!1),[w,k]=(0,a.useState)(null),S=async e=>{if(!e||0===e.trim().length){k({isValid:!1,error:"Bot token is required"}),b(!1);return}if(!/^\d+:[A-Za-z0-9_-]+$/.test(e.trim())){k({isValid:!1,error:"Invalid bot token format. Should be like: 123456789:ABCdefGHIjklMNOpqrsTUVwxyz"}),b(!1);return}v(!0),k(null);try{let s=await fetch("https://api.telegram.org/bot".concat(e.trim(),"/getMe")),t=await s.json();if(t.ok&&t.result){let s=t.result;if(!s.is_bot){k({isValid:!1,error:"The provided token does not belong to a bot account"}),b(!1);return}try{console.log("API URL:","https://expenseai-production.up.railway.app"),console.log("Saving bot config for user_id: temp-user-id");let t=await fetch("".concat("https://expenseai-production.up.railway.app","/api/bot/setup"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:"temp-user-id",bot_token:e.trim(),bot_username:s.username})}),r=await t.json();if(console.log("Save response:",t.status,r),!t.ok)throw Error(r.message||"Failed to save bot configuration");j(s.username),k({isValid:!0,botInfo:s}),b(!0)}catch(s){console.error("Error saving bot config:",s);let e=s instanceof Error?s.message:"Unknown error";k({isValid:!1,error:"Validation successful but failed to save: ".concat(e)}),b(!1)}}else k({isValid:!1,error:t.description||"Invalid bot token. Please check your token."}),b(!1)}catch(e){k({isValid:!1,error:"Failed to validate bot token. Please check your internet connection and try again."}),b(!1)}finally{v(!1)}},C=e=>{f(e),k(null),b(!1)},A=async e=>{try{await navigator.clipboard.writeText(e)}catch(e){console.error("Failed to copy:",e)}};return(0,r.jsx)("div",{className:"space-y-6",children:(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("div",{className:"p-2 bg-blue-500 text-white rounded-lg",children:(0,r.jsx)(d.Z,{className:"h-6 w-6"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-xl font-semibold",children:"Create Your Telegram Bot"}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Set up a personal bot for expense tracking"})]})]}),(0,r.jsxs)(o.Zb,{className:"border-amber-200 bg-amber-50/50",children:[(0,r.jsx)(o.Ol,{className:"pb-3",children:(0,r.jsxs)(o.ll,{className:"text-lg flex items-center",children:[(0,r.jsx)(d.Z,{className:"h-5 w-5 mr-2 text-amber-600"}),"Step-by-Step Instructions"]})}),(0,r.jsx)(o.aY,{className:"space-y-3",children:(0,r.jsxs)("div",{className:"space-y-3 text-sm",children:[(0,r.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,r.jsx)("span",{className:"flex-shrink-0 w-6 h-6 bg-blue-100 text-blue-800 rounded-full flex items-center justify-center text-xs font-semibold",children:"1"}),(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsx)("p",{children:(0,r.jsx)("strong",{children:"Open Telegram and search for @BotFather"})}),(0,r.jsx)(n.z,{variant:"link",className:"p-0 h-auto text-xs",asChild:!0,children:(0,r.jsxs)("a",{href:"https://t.me/BotFather",target:"_blank",rel:"noopener noreferrer",children:[(0,r.jsx)(x.Z,{className:"h-3 w-3 mr-1"}),"Open @BotFather"]})})]})]}),(0,r.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,r.jsx)("span",{className:"flex-shrink-0 w-6 h-6 bg-blue-100 text-blue-800 rounded-full flex items-center justify-center text-xs font-semibold",children:"2"}),(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsx)("p",{children:(0,r.jsx)("strong",{children:"Send the command to create a new bot"})}),(0,r.jsxs)("div",{className:"bg-gray-100 p-2 rounded font-mono text-sm flex items-center justify-between",children:[(0,r.jsx)("span",{children:"/newbot"}),(0,r.jsx)(n.z,{size:"sm",variant:"ghost",onClick:()=>A("/newbot"),className:"h-6 w-6 p-0",children:(0,r.jsx)(u.Z,{className:"h-3 w-3"})})]})]})]}),(0,r.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,r.jsx)("span",{className:"flex-shrink-0 w-6 h-6 bg-blue-100 text-blue-800 rounded-full flex items-center justify-center text-xs font-semibold",children:"3"}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Choose a name for your bot"}),(0,r.jsx)("br",{}),(0,r.jsx)("span",{className:"text-gray-600",children:'e.g., "My Expense Tracker"'})]})]}),(0,r.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,r.jsx)("span",{className:"flex-shrink-0 w-6 h-6 bg-blue-100 text-blue-800 rounded-full flex items-center justify-center text-xs font-semibold",children:"4"}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:'Choose a username ending in "bot"'}),(0,r.jsx)("br",{}),(0,r.jsx)("span",{className:"text-gray-600",children:'e.g., "myexpense_bot"'})]})]}),(0,r.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,r.jsx)("span",{className:"flex-shrink-0 w-6 h-6 bg-blue-100 text-blue-800 rounded-full flex items-center justify-center text-xs font-semibold",children:"5"}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Copy the bot token from BotFather's response"}),(0,r.jsx)("br",{}),(0,r.jsx)("span",{className:"text-gray-600",children:"It looks like: 123456789:ABCdefGHIjklMNOpqrsTUVwxyz"})]})]})]})})]}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(l._,{htmlFor:"bot-token",children:"Bot Token"}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(i.I,{id:"bot-token",type:"password",placeholder:"123456789:ABCdefGHIjklMNOpqrsTUVwxyz",value:t,onChange:e=>C(e.target.value),disabled:y||N,className:(null==w?void 0:w.isValid)===!0?"border-green-500 bg-green-50":(null==w?void 0:w.isValid)===!1?"border-red-500 bg-red-50":""}),(0,r.jsx)(n.z,{onClick:()=>{S(t)},disabled:N||y||!t.trim(),className:"w-full",variant:(null==w?void 0:w.isValid)?"default":"outline",children:N?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(m.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Validating Bot Token..."]}):(null==w?void 0:w.isValid)?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(h.Z,{className:"mr-2 h-4 w-4"}),"Bot Token Validated"]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(d.Z,{className:"mr-2 h-4 w-4"}),"Validate Bot Token"]})})]})]}),w&&(0,r.jsxs)(c.bZ,{variant:w.isValid?"default":"destructive",children:[w.isValid?(0,r.jsx)(h.Z,{className:"h-4 w-4"}):(0,r.jsx)(p.Z,{className:"h-4 w-4"}),(0,r.jsx)(c.X,{children:w.isValid?(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("p",{className:"font-medium",children:"✅ Bot token is valid!"}),w.botInfo&&(0,r.jsxs)("div",{className:"text-sm space-y-1",children:[(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Bot Name:"})," ",w.botInfo.first_name]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Username:"})," @",w.botInfo.username]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Bot ID:"})," ",w.botInfo.id]})]})]}):(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-medium",children:"❌ Validation failed"}),(0,r.jsx)("p",{className:"text-sm mt-1",children:w.error})]})})]}),(null==w?void 0:w.isValid)&&(0,r.jsx)(o.Zb,{className:"border-green-200 bg-green-50/50",children:(0,r.jsx)(o.aY,{className:"pt-4",children:(0,r.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,r.jsx)(h.Z,{className:"h-5 w-5 text-green-600 mt-0.5"}),(0,r.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,r.jsx)("p",{className:"font-medium text-green-800",children:"Great! Your bot is ready for the next step."}),(0,r.jsx)("p",{className:"text-green-700",children:"You can now proceed to configure AI processing with Gemini API."}),(0,r.jsxs)("p",{className:"text-xs text-green-600",children:["Once setup is complete, you'll be able to send receipt photos to @",null===(s=w.botInfo)||void 0===s?void 0:s.username," and get automated expense tracking!"]})]})]})})})]})]})})}},5613:function(e,s,t){t.d(s,{X:function(){return o},bZ:function(){return c}});var r=t(7437),a=t(2265),n=t(535),i=t(4508);let l=(0,n.j)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),c=a.forwardRef((e,s)=>{let{className:t,variant:a,...n}=e;return(0,r.jsx)("div",{ref:s,role:"alert",className:(0,i.cn)(l({variant:a}),t),...n})});c.displayName="Alert",a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("h5",{ref:s,className:(0,i.cn)("mb-1 font-medium leading-none tracking-tight",t),...a})}).displayName="AlertTitle";let o=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("div",{ref:s,className:(0,i.cn)("text-sm [&_p]:leading-relaxed",t),...a})});o.displayName="AlertDescription"},5974:function(e,s,t){t.d(s,{C:function(){return l}});var r=t(7437);t(2265);var a=t(535),n=t(4508);let i=(0,a.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function l(e){let{className:s,variant:t,...a}=e;return(0,r.jsx)("div",{className:(0,n.cn)(i({variant:t}),s),...a})}},2869:function(e,s,t){t.d(s,{z:function(){return o}});var r=t(7437),a=t(2265),n=t(7495),i=t(535),l=t(4508);let c=(0,i.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),o=a.forwardRef((e,s)=>{let{className:t,variant:a,size:i,asChild:o=!1,...d}=e,x=o?n.g7:"button";return(0,r.jsx)(x,{className:(0,l.cn)(c({variant:a,size:i,className:t})),ref:s,...d})});o.displayName="Button"},6070:function(e,s,t){t.d(s,{Ol:function(){return l},SZ:function(){return o},Zb:function(){return i},aY:function(){return d},ll:function(){return c}});var r=t(7437),a=t(2265),n=t(4508);let i=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("div",{ref:s,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",t),...a})});i.displayName="Card";let l=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("div",{ref:s,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",t),...a})});l.displayName="CardHeader";let c=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("h3",{ref:s,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",t),...a})});c.displayName="CardTitle";let o=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("p",{ref:s,className:(0,n.cn)("text-sm text-muted-foreground",t),...a})});o.displayName="CardDescription";let d=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("div",{ref:s,className:(0,n.cn)("p-6 pt-0",t),...a})});d.displayName="CardContent",a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("div",{ref:s,className:(0,n.cn)("flex items-center p-6 pt-0",t),...a})}).displayName="CardFooter"},5186:function(e,s,t){t.d(s,{I:function(){return i}});var r=t(7437),a=t(2265),n=t(4508);let i=a.forwardRef((e,s)=>{let{className:t,type:a,...i}=e;return(0,r.jsx)("input",{type:a,className:(0,n.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:s,...i})});i.displayName="Input"},6815:function(e,s,t){t.d(s,{_:function(){return i}});var r=t(7437),a=t(2265),n=t(4508);let i=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("label",{ref:s,className:(0,n.cn)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",t),...a})});i.displayName="Label"},2759:function(e,s,t){t.d(s,{E:function(){return l}});var r=t(7437),a=t(2265),n=t(610),i=t(4508);let l=a.forwardRef((e,s)=>{let{className:t,value:a,...l}=e;return(0,r.jsx)(n.fC,{ref:s,className:(0,i.cn)("relative h-4 w-full overflow-hidden rounded-full bg-secondary",t),...l,children:(0,r.jsx)(n.z$,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:"translateX(-".concat(100-(a||0),"%)")}})})});l.displayName=n.fC.displayName},7992:function(e,s,t){t.d(s,{pm:function(){return u}});var r=t(2265);let a=0,n=new Map,i=e=>{if(n.has(e))return;let s=setTimeout(()=>{n.delete(e),d({type:"REMOVE_TOAST",toastId:e})},1e6);n.set(e,s)},l=(e,s)=>{switch(s.type){case"ADD_TOAST":return{...e,toasts:[s.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===s.toast.id?{...e,...s.toast}:e)};case"DISMISS_TOAST":{let{toastId:t}=s;return t?i(t):e.toasts.forEach(e=>{i(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===t||void 0===t?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===s.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==s.toastId)}}},c=[],o={toasts:[]};function d(e){o=l(o,e),c.forEach(e=>{e(o)})}function x(e){let{...s}=e,t=(a=(a+1)%Number.MAX_SAFE_INTEGER).toString(),r=()=>d({type:"DISMISS_TOAST",toastId:t});return d({type:"ADD_TOAST",toast:{...s,id:t,open:!0,onOpenChange:e=>{e||r()}}}),{id:t,dismiss:r,update:e=>d({type:"UPDATE_TOAST",toast:{...e,id:t}})}}function u(){let[e,s]=r.useState(o);return r.useEffect(()=>(c.push(s),()=>{let e=c.indexOf(s);e>-1&&c.splice(e,1)}),[e]),{...e,toast:x,dismiss:e=>d({type:"DISMISS_TOAST",toastId:e})}}},4508:function(e,s,t){t.d(s,{cn:function(){return n}});var r=t(1994),a=t(3335);function n(){for(var e=arguments.length,s=Array(e),t=0;t<e;t++)s[t]=arguments[t];return(0,a.m6)((0,r.W)(s))}}}]);