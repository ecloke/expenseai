(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[702],{61280:function(e,t,s){Promise.resolve().then(s.bind(s,71720))},71720:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return h}});var r=s(57437),n=s(2265),l=s(4125),a=s(46949),o=s(18990),c=s(48877),i=s(46221),u=s(71621),d=s(76597),m=s(66070),x=s(2141),f=s(99376);function h(){let[e,t]=(0,n.useState)(null),[s,h]=(0,n.useState)(!1),[g,p]=(0,n.useState)("general"),[b,j]=(0,n.useState)([]),y=(0,f.useRouter)();(0,n.useEffect)(()=>{w(),v()},[]),(0,n.useEffect)(()=>{e&&N()},[e]);let v=()=>{let e=localStorage.getItem("tutorial-completed"),t=sessionStorage.getItem("from-setup");(!e||t)&&(h(!0),sessionStorage.removeItem("from-setup"))},w=async()=>{try{let e=(0,x.J)(),{data:{session:s},error:r}=await e.auth.getSession();if(r||!s){y.push("/login");return}t(s.user)}catch(e){console.error("Error loading user:",e)}},N=async()=>{if(e)try{let t=(0,x.J)(),{data:s,error:r}=await t.from("projects").select("id, name, currency").eq("user_id",e.id).order("name");if(r){console.error("Error loading projects:",r);return}j(s||[])}catch(e){console.error("Error loading projects:",e)}};return(0,r.jsxs)(l.Z,{children:[(0,r.jsxs)("div",{className:"space-y-6 sm:space-y-8 pt-16 lg:pt-0",children:[(0,r.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center justify-between space-y-4 lg:space-y-0",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Dashboard"}),(0,r.jsx)("p",{className:"text-gray-400 mt-1 sm:mt-2 text-sm sm:text-base",children:"Track and analyze your spending patterns"})]}),(0,r.jsx)(m.Zb,{className:"bg-gray-800 border-gray-700 w-full lg:w-80",children:(0,r.jsx)(m.aY,{className:"pt-3 sm:pt-4",children:(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-300",children:"Project"}),(0,r.jsx)(d.G,{value:g,onValueChange:e=>{p(e)},options:[{value:"general",label:"\uD83D\uDCC1 General Expenses"},...b.map(e=>({value:e.id,label:"\uD83D\uDCC1 ".concat(e.name.length>20?e.name.substring(0,17)+"...":e.name)}))],placeholder:"Select Project"})]})})})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("h2",{className:"text-xl sm:text-2xl font-bold text-white mb-4 sm:mb-6 flex items-center gap-2",children:[(0,r.jsx)(i.Z,{className:"h-5 w-5 sm:h-6 sm:w-6 text-blue-400"}),"Analytics Overview"]}),(0,r.jsx)(a.Z,{userId:null==e?void 0:e.id,projectId:g,currency:(()=>{if("general"===g)return"$";let e=b.find(e=>e.id===g);return(null==e?void 0:e.currency)||"$"})()})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("h2",{className:"text-xl sm:text-2xl font-bold text-white mb-4 sm:mb-6 flex items-center gap-2",children:[(0,r.jsx)(u.Z,{className:"h-5 w-5 sm:h-6 sm:w-6 text-green-400"}),"Recent Transactions"]}),(0,r.jsx)(o.Z,{userId:null==e?void 0:e.id,projectId:g})]})]}),(0,r.jsx)(c.Z,{isOpen:s,onClose:()=>h(!1),onComplete:()=>{localStorage.setItem("tutorial-completed","true"),h(!1)}})]})}},76597:function(e,t,s){"use strict";s.d(t,{G:function(){return o}});var r=s(57437),n=s(2265),l=s(40875),a=s(30401);function o(e){let{value:t,onValueChange:s,options:o,placeholder:c,className:i=""}=e,[u,d]=(0,n.useState)(!1),m=(0,n.useRef)(null);(0,n.useEffect)(()=>{function e(e){m.current&&!m.current.contains(e.target)&&d(!1)}return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);let x=o.find(e=>e.value===t);return(0,r.jsxs)("div",{className:"relative ".concat(i),ref:m,children:[(0,r.jsxs)("button",{type:"button",onClick:()=>d(!u),className:"w-full flex items-center justify-between px-3 py-2 bg-gray-700 border border-gray-600 text-white rounded-md hover:bg-gray-600 focus:border-blue-500 focus:ring-2 focus:ring-blue-500 focus:ring-opacity-20 transition-colors",children:[(0,r.jsx)("span",{className:x?"text-white":"text-gray-400",children:x?x.label:c}),(0,r.jsx)(l.Z,{className:"h-4 w-4 text-gray-400 transition-transform ".concat(u?"rotate-180":"")})]}),u&&(0,r.jsx)("div",{className:"absolute z-50 w-full mt-1 bg-gray-700 border border-gray-600 rounded-md shadow-lg max-h-60 overflow-auto",children:o.map(e=>(0,r.jsxs)("button",{type:"button",onClick:()=>{s(e.value),d(!1)},className:"w-full flex items-center justify-between px-3 py-3 text-left text-white hover:bg-gray-600 transition-colors min-h-[44px]",children:[(0,r.jsx)("span",{children:e.label}),t===e.value&&(0,r.jsx)(a.Z,{className:"h-4 w-4 text-blue-400"})]},e.value))})]})}},30401:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(39763).Z)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},40875:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(39763).Z)("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]])}},function(e){e.O(0,[284,609,452,963,780,287,68,429,32,329,162,830,971,117,744],function(){return e(e.s=61280)}),_N_E=e.O()}]);