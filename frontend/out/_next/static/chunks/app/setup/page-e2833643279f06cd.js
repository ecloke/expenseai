(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[413],{9319:function(e,t,s){Promise.resolve().then(s.bind(s,1957))},1957:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return f}});var r=s(7437),a=s(2265),i=s(9376),l=s(2141),n=s(2759),o=s(6070),c=s(5974),d=s(2222),u=s(4972),x=s(1649),m=s(5302);let p=(0,s(9763).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);var h=s(2869),b=s(7992),g=s(9814),j=s(891),N=s(1345);function f(){let[e,t]=(0,a.useState)(1),[s,f]=(0,a.useState)([]),[v,y]=(0,a.useState)(""),[S,w]=(0,a.useState)(""),[k,C]=(0,a.useState)(null),Z=(0,i.useRouter)(),{toast:E}=(0,b.pm)(),T=(0,l.J)();(0,a.useEffect)(()=>{(async()=>{var e;let{data:{session:t}}=await T.auth.getSession();(null==t?void 0:null===(e=t.user)||void 0===e?void 0:e.id)&&C(t.user.id)})()},[T]);let I=[{id:1,title:"Telegram Bot",description:"Create and configure your personal expense bot",icon:(0,r.jsx)(d.Z,{className:"h-6 w-6"})},{id:2,title:"AI Configuration",description:"Connect Gemini AI for receipt processing",icon:(0,r.jsx)(u.Z,{className:"h-6 w-6"})},{id:3,title:"Google Sheets",description:"Connect your Google account for data storage",icon:(0,r.jsx)(x.Z,{className:"h-6 w-6"})}];(0,a.useEffect)(()=>{let e=localStorage.getItem("setup-progress");if(e)try{let s=JSON.parse(e);t(s.currentStep||1),f(s.completedSteps||[]),y(s.botToken||""),w(s.botUsername||"")}catch(e){console.error("Error loading setup progress:",e)}},[]),(0,a.useEffect)(()=>{localStorage.setItem("setup-progress",JSON.stringify({currentStep:e,completedSteps:s,botToken:v,botUsername:S}))},[e,s,v,S]);let O=()=>{s.includes(e)||f(t=>[...t,e]),e<I.length?t(e+1):A()},Y=()=>{e>1&&t(e-1)},_=(e,t)=>{t&&!s.includes(e)?f(t=>[...t,e]):!t&&s.includes(e)&&f(t=>t.filter(t=>t!==e))},A=async()=>{try{if(!k){E({title:"Error",description:"User not authenticated. Please sign in and try again.",variant:"destructive"});return}(await fetch("".concat("https://expenseai-production.up.railway.app","/api/bot/start"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:k})})).ok?E({title:"Setup Complete! \uD83C\uDF89",description:"Your AI expense tracker is ready! Your Telegram bot is now active."}):E({title:"Setup Complete! ⚠️",description:"Setup finished but bot startup had issues. Check dashboard for details.",variant:"destructive"})}catch(e){console.error("Error starting bot:",e),E({title:"Setup Complete! ⚠️",description:"Setup finished but bot startup failed. You can start it manually from dashboard.",variant:"destructive"})}localStorage.removeItem("setup-progress"),setTimeout(()=>{Z.push("/dashboard")},3e3)},B=e/I.length*100;return(0,r.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100",children:[(0,r.jsx)("header",{className:"border-b bg-white/80 backdrop-blur-sm",children:(0,r.jsx)("div",{className:"container mx-auto px-4 py-4",children:(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(d.Z,{className:"h-8 w-8 text-blue-600"}),(0,r.jsx)("span",{className:"text-2xl font-bold text-gray-900",children:"ExpenseAI Setup"})]})})}),(0,r.jsxs)("div",{className:"container mx-auto px-4 py-8 max-w-4xl",children:[(0,r.jsx)(o.Zb,{className:"mb-8 border-0 shadow-lg bg-white/80 backdrop-blur-sm",children:(0,r.jsxs)(o.Ol,{children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(o.ll,{className:"text-2xl",children:"Setup Your Expense Tracker"}),(0,r.jsx)(o.SZ,{children:"Follow these steps to automate your expense tracking"})]}),(0,r.jsxs)(c.C,{variant:"secondary",className:"text-sm",children:["Step ",e," of ",I.length]})]}),(0,r.jsx)(n.E,{value:B,className:"h-2"})]})}),(0,r.jsx)("div",{className:"grid md:grid-cols-3 gap-4 mb-8",children:I.map(a=>(0,r.jsx)(o.Zb,{className:"relative border-2 transition-all cursor-pointer ".concat(a.id===e?"border-blue-500 bg-blue-50/80":s.includes(a.id)?"border-green-500 bg-green-50/80":"border-gray-200 bg-white/60"),onClick:()=>t(a.id),children:(0,r.jsx)(o.Ol,{className:"pb-3",children:(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("div",{className:"p-2 rounded-lg ".concat(a.id===e?"bg-blue-500 text-white":s.includes(a.id)?"bg-green-500 text-white":"bg-gray-100 text-gray-600"),children:s.includes(a.id)?(0,r.jsx)(m.Z,{className:"h-6 w-6"}):a.icon}),(0,r.jsxs)("div",{children:[(0,r.jsx)(o.ll,{className:"text-lg",children:a.title}),(0,r.jsx)(o.SZ,{className:"text-sm",children:a.description})]})]})})},a.id))}),(0,r.jsx)(o.Zb,{className:"border-0 shadow-xl bg-white/90 backdrop-blur-sm",children:(0,r.jsxs)(o.aY,{className:"pt-6",children:[1===e&&(0,r.jsx)(g.Z,{botToken:v,setBotToken:y,botUsername:S,setBotUsername:w,onValidationComplete:e=>_(1,e)}),2===e&&(0,r.jsx)(j.Z,{onNext:O,onBack:Y}),3===e&&(0,r.jsx)(N.Z,{onNext:O,onBack:Y}),1===e&&(0,r.jsxs)("div",{className:"flex gap-3 pt-6 border-t mt-6",children:[(0,r.jsxs)(h.z,{variant:"outline",onClick:Y,disabled:1===e,className:"flex-1",children:[(0,r.jsx)(p,{className:"mr-2 h-4 w-4"}),"Back"]}),(0,r.jsx)(h.z,{onClick:O,disabled:!s.includes(1),className:"flex-1",children:e===I.length?"Complete Setup":"Next"})]})]})}),s.length===I.length&&(0,r.jsx)(o.Zb,{className:"mt-8 border-0 shadow-lg bg-green-50/80 backdrop-blur-sm border-green-200",children:(0,r.jsx)(o.aY,{className:"pt-6",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)(m.Z,{className:"h-16 w-16 text-green-600 mx-auto mb-4"}),(0,r.jsx)("h2",{className:"text-2xl font-bold text-green-800 mb-2",children:"Setup Complete! \uD83C\uDF89"}),(0,r.jsx)("p",{className:"text-green-700 mb-4",children:"Your AI expense tracker is ready to use!"}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(h.z,{onClick:A,className:"w-full",size:"lg",children:"Go to Dashboard"}),(0,r.jsx)("p",{className:"text-xs text-green-600",children:"You'll be redirected automatically in a moment..."})]})]})})})]})]})}},9376:function(e,t,s){"use strict";var r=s(5475);s.o(r,"useRouter")&&s.d(t,{useRouter:function(){return r.useRouter}})}},function(e){e.O(0,[284,452,505,318,971,117,744],function(){return e(e.s=9319)}),_N_E=e.O()}]);