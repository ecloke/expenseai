(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[413],{89319:function(e,t,s){Promise.resolve().then(s.bind(s,41957))},41957:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return y}});var r=s(57437),n=s(2265),a=s(99376),i=s(2141),l=s(32759),c=s(66070),o=s(35974),d=s(82222),u=s(64972),m=s(65302);let x=(0,s(39763).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);var p=s(15863),h=s(62869),b=s(77992),f=s(59814),g=s(20891);function y(){let[e,t]=(0,n.useState)(1),[s,y]=(0,n.useState)([]),[N,j]=(0,n.useState)(""),[v,w]=(0,n.useState)(""),[k,S]=(0,n.useState)(null),[C,Z]=(0,n.useState)(!1),E=(0,a.useRouter)(),{toast:_}=(0,b.pm)(),P=(0,i.J)();(0,n.useEffect)(()=>{(async()=>{var e;let{data:{session:t}}=await P.auth.getSession();(null==t?void 0:null===(e=t.user)||void 0===e?void 0:e.id)&&S(t.user.id)})()},[P]);let M=[{id:1,title:"Telegram Bot",description:"Create and configure your personal expense bot",icon:(0,r.jsx)(d.Z,{className:"h-6 w-6"})},{id:2,title:"AI Configuration",description:"Connect Gemini AI for receipt processing",icon:(0,r.jsx)(u.Z,{className:"h-6 w-6"})}];(0,n.useEffect)(()=>{let e=localStorage.getItem("setup-progress");if(e)try{let s=JSON.parse(e);t(s.currentStep||1),y(s.completedSteps||[]),j(s.botToken||""),w(s.botUsername||"")}catch(e){console.error("Error loading setup progress:",e)}},[]),(0,n.useEffect)(()=>{localStorage.setItem("setup-progress",JSON.stringify({currentStep:e,completedSteps:s,botToken:N,botUsername:v}))},[e,s,N,v]);let O=()=>{e>1&&t(e-1)},$=(e,t)=>{t&&!s.includes(e)?y(t=>[...t,e]):!t&&s.includes(e)&&y(t=>t.filter(t=>t!==e))},I=async()=>{if(!C){try{if(Z(!0),!k){_({title:"Error",description:"User not authenticated. Please sign in and try again.",variant:"destructive"});return}(await fetch("".concat("https://expenseai-production.up.railway.app","/api/bot/start"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:k})})).ok?_({title:"Setup Complete! \uD83C\uDF89",description:"Your enhanced expense tracker is ready! Now using database storage with instant commands."}):_({title:"Setup Complete! ⚠️",description:"Setup finished but bot startup had issues. Check dashboard for details.",variant:"destructive"})}catch(e){console.error("Error starting bot:",e),_({title:"Setup Complete! ⚠️",description:"Setup finished but bot startup failed. You can start it manually from dashboard.",variant:"destructive"})}finally{Z(!1)}localStorage.removeItem("setup-progress"),sessionStorage.setItem("from-setup","true"),setTimeout(()=>{E.push("/dashboard")},3e3)}},T=e/M.length*100;return(0,r.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 to-gray-800",children:[(0,r.jsx)("header",{className:"border-b border-gray-700 bg-gray-800/80 backdrop-blur-sm",children:(0,r.jsx)("div",{className:"container mx-auto px-4 py-4",children:(0,r.jsx)("div",{className:"flex items-center justify-between",children:(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(d.Z,{className:"h-6 w-6 sm:h-8 sm:w-8 text-blue-400"}),(0,r.jsx)("span",{className:"text-xl sm:text-2xl font-bold text-white",children:"ExpenseAI Setup"})]})})})}),(0,r.jsxs)("div",{className:"container mx-auto px-4 py-6 sm:py-8 max-w-4xl",children:[(0,r.jsx)(c.Zb,{className:"mb-6 sm:mb-8 border-0 shadow-lg bg-gray-800/80 backdrop-blur-sm",children:(0,r.jsxs)(c.Ol,{className:"pb-4 sm:pb-6",children:[(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between mb-4 space-y-2 sm:space-y-0",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(c.ll,{className:"text-xl sm:text-2xl text-white",children:"Setup Your Enhanced Expense Tracker"}),(0,r.jsx)(c.SZ,{className:"text-gray-300 text-sm sm:text-base",children:"Simplified setup - now with database storage and instant commands (no Google Sheets needed!)"})]}),(0,r.jsxs)(o.C,{variant:"secondary",className:"text-sm self-start sm:self-center",children:["Step ",e," of ",M.length]})]}),(0,r.jsx)(l.E,{value:T,className:"h-2"})]})}),(0,r.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-6 sm:mb-8",children:M.map(n=>(0,r.jsx)(c.Zb,{className:"relative border-2 transition-all cursor-pointer ".concat(n.id===e?"border-blue-500 bg-blue-900/20 border-blue-400":s.includes(n.id)?"border-green-500 bg-green-900/20 border-green-400":"border-gray-600 bg-gray-700/60"),onClick:()=>t(n.id),children:(0,r.jsx)(c.Ol,{className:"pb-3",children:(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("div",{className:"p-2 rounded-lg ".concat(n.id===e?"bg-blue-600 text-white":s.includes(n.id)?"bg-green-600 text-white":"bg-gray-600 text-gray-300"),children:s.includes(n.id)?(0,r.jsx)(m.Z,{className:"h-5 w-5 sm:h-6 sm:w-6"}):(0,r.jsx)("div",{className:"h-5 w-5 sm:h-6 sm:w-6",children:n.icon})}),(0,r.jsxs)("div",{children:[(0,r.jsx)(c.ll,{className:"text-base sm:text-lg text-white",children:n.title}),(0,r.jsx)(c.SZ,{className:"text-xs sm:text-sm text-gray-300",children:n.description})]})]})})},n.id))}),(0,r.jsx)(c.Zb,{className:"border-0 shadow-xl bg-gray-800/90 backdrop-blur-sm",children:(0,r.jsxs)(c.aY,{className:"pt-4 sm:pt-6 px-4 sm:px-6",children:[1===e&&(0,r.jsx)(f.Z,{botToken:N,setBotToken:j,botUsername:v,setBotUsername:w,onValidationComplete:e=>$(1,e)}),2===e&&(0,r.jsx)(g.Z,{onNext:I,onBack:O}),1===e&&(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3 pt-6 border-t mt-6",children:[(0,r.jsxs)(h.z,{variant:"outline",onClick:O,disabled:1===e,className:"flex-1",children:[(0,r.jsx)(x,{className:"mr-2 h-4 w-4"}),"Back"]}),(0,r.jsx)(h.z,{onClick:()=>{s.includes(e)||y(t=>[...t,e]),e<M.length?t(e+1):I()},disabled:!s.includes(1),className:"flex-1",children:e===M.length?"Complete Setup":"Next"})]})]})}),s.length===M.length&&(0,r.jsx)(c.Zb,{className:"mt-8 border-0 shadow-lg bg-green-900/20 backdrop-blur-sm border-green-700",children:(0,r.jsx)(c.aY,{className:"pt-6",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)(m.Z,{className:"h-12 w-12 sm:h-16 sm:w-16 text-green-400 mx-auto mb-4"}),(0,r.jsx)("h2",{className:"text-xl sm:text-2xl font-bold text-green-200 mb-2",children:"Setup Complete! \uD83C\uDF89"}),(0,r.jsx)("p",{className:"text-green-300 mb-4 text-sm sm:text-base",children:"Your AI expense tracker is ready to use!"}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(h.z,{onClick:I,disabled:C,className:"w-full",size:"lg",children:C?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(p.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Starting Bot & Redirecting..."]}):"Go to Dashboard"}),(0,r.jsx)("p",{className:"text-xs sm:text-sm text-green-400",children:"You'll be redirected automatically in a moment..."})]})]})})})]})]})}},22252:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(39763).Z)("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},82222:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(39763).Z)("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]])},65302:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(39763).Z)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},99376:function(e,t,s){"use strict";var r=s(35475);s.o(r,"usePathname")&&s.d(t,{usePathname:function(){return r.usePathname}}),s.o(r,"useRouter")&&s.d(t,{useRouter:function(){return r.useRouter}})},73966:function(e,t,s){"use strict";s.d(t,{b:function(){return i},k:function(){return a}});var r=s(2265),n=s(57437);function a(e,t){let s=r.createContext(t),a=e=>{let{children:t,...a}=e,i=r.useMemo(()=>a,Object.values(a));return(0,n.jsx)(s.Provider,{value:i,children:t})};return a.displayName=e+"Provider",[a,function(n){let a=r.useContext(s);if(a)return a;if(void 0!==t)return t;throw Error(`\`${n}\` must be used within \`${e}\``)}]}function i(e,t=[]){let s=[],a=()=>{let t=s.map(e=>r.createContext(e));return function(s){let n=s?.[e]||t;return r.useMemo(()=>({[`__scope${e}`]:{...s,[e]:n}}),[s,n])}};return a.scopeName=e,[function(t,a){let i=r.createContext(a),l=s.length;s=[...s,a];let c=t=>{let{scope:s,children:a,...c}=t,o=s?.[e]?.[l]||i,d=r.useMemo(()=>c,Object.values(c));return(0,n.jsx)(o.Provider,{value:d,children:a})};return c.displayName=t+"Provider",[c,function(s,n){let c=n?.[e]?.[l]||i,o=r.useContext(c);if(o)return o;if(void 0!==a)return a;throw Error(`\`${s}\` must be used within \`${t}\``)}]},function(...e){let t=e[0];if(1===e.length)return t;let s=()=>{let s=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){let n=s.reduce((t,{useScope:s,scopeName:r})=>{let n=s(e)[`__scope${r}`];return{...t,...n}},{});return r.useMemo(()=>({[`__scope${t.scopeName}`]:n}),[n])}};return s.scopeName=t.scopeName,s}(a,...t)]}},66840:function(e,t,s){"use strict";s.d(t,{WV:function(){return l},jH:function(){return c}});var r=s(2265),n=s(54887),a=s(37053),i=s(57437),l=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,t)=>{let s=(0,a.Z8)(`Primitive.${t}`),n=r.forwardRef((e,r)=>{let{asChild:n,...a}=e,l=n?s:t;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,i.jsx)(l,{...a,ref:r})});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{});function c(e,t){e&&n.flushSync(()=>e.dispatchEvent(t))}}},function(e){e.O(0,[284,452,980,541,971,117,744],function(){return e(e.s=89319)}),_N_E=e.O()}]);