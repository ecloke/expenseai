(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[413],{89319:function(e,t,s){Promise.resolve().then(s.bind(s,41957))},41957:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return j}});var r=s(57437),n=s(2265),a=s(99376),i=s(2141),l=s(32759),o=s(66070),c=s(35974),d=s(82222),u=s(64972),m=s(61649),p=s(65302);let x=(0,s(39763).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);var h=s(62869),b=s(77992),g=s(59814),f=s(20891),N=s(1345);function j(){let[e,t]=(0,n.useState)(1),[s,j]=(0,n.useState)([]),[v,w]=(0,n.useState)(""),[y,S]=(0,n.useState)(""),[k,C]=(0,n.useState)(null),Z=(0,a.useRouter)(),{toast:E}=(0,b.pm)(),_=(0,i.J)();(0,n.useEffect)(()=>{(async()=>{var e;let{data:{session:t}}=await _.auth.getSession();(null==t?void 0:null===(e=t.user)||void 0===e?void 0:e.id)&&C(t.user.id)})()},[_]);let O=[{id:1,title:"Telegram Bot",description:"Create and configure your personal expense bot",icon:(0,r.jsx)(d.Z,{className:"h-6 w-6"})},{id:2,title:"AI Configuration",description:"Connect Gemini AI for receipt processing",icon:(0,r.jsx)(u.Z,{className:"h-6 w-6"})},{id:3,title:"Google Sheets",description:"Connect your Google account for data storage",icon:(0,r.jsx)(m.Z,{className:"h-6 w-6"})}];(0,n.useEffect)(()=>{let e=localStorage.getItem("setup-progress");if(e)try{let s=JSON.parse(e);t(s.currentStep||1),j(s.completedSteps||[]),w(s.botToken||""),S(s.botUsername||"")}catch(e){console.error("Error loading setup progress:",e)}},[]),(0,n.useEffect)(()=>{localStorage.setItem("setup-progress",JSON.stringify({currentStep:e,completedSteps:s,botToken:v,botUsername:y}))},[e,s,v,y]);let T=()=>{s.includes(e)||j(t=>[...t,e]),e<O.length?t(e+1):P()},I=()=>{e>1&&t(e-1)},Y=(e,t)=>{t&&!s.includes(e)?j(t=>[...t,e]):!t&&s.includes(e)&&j(t=>t.filter(t=>t!==e))},P=async()=>{try{if(!k){E({title:"Error",description:"User not authenticated. Please sign in and try again.",variant:"destructive"});return}(await fetch("".concat("https://expenseai-production.up.railway.app","/api/bot/start"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:k})})).ok?E({title:"Setup Complete! \uD83C\uDF89",description:"Your AI expense tracker is ready! Your Telegram bot is now active."}):E({title:"Setup Complete! ⚠️",description:"Setup finished but bot startup had issues. Check dashboard for details.",variant:"destructive"})}catch(e){console.error("Error starting bot:",e),E({title:"Setup Complete! ⚠️",description:"Setup finished but bot startup failed. You can start it manually from dashboard.",variant:"destructive"})}localStorage.removeItem("setup-progress"),setTimeout(()=>{Z.push("/dashboard")},3e3)},$=e/O.length*100;return(0,r.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100",children:[(0,r.jsx)("header",{className:"border-b bg-white/80 backdrop-blur-sm",children:(0,r.jsx)("div",{className:"container mx-auto px-4 py-4",children:(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(d.Z,{className:"h-8 w-8 text-blue-600"}),(0,r.jsx)("span",{className:"text-2xl font-bold text-gray-900",children:"ExpenseAI Setup"})]})})}),(0,r.jsxs)("div",{className:"container mx-auto px-4 py-8 max-w-4xl",children:[(0,r.jsx)(o.Zb,{className:"mb-8 border-0 shadow-lg bg-white/80 backdrop-blur-sm",children:(0,r.jsxs)(o.Ol,{children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(o.ll,{className:"text-2xl",children:"Setup Your Expense Tracker"}),(0,r.jsx)(o.SZ,{children:"Follow these steps to automate your expense tracking"})]}),(0,r.jsxs)(c.C,{variant:"secondary",className:"text-sm",children:["Step ",e," of ",O.length]})]}),(0,r.jsx)(l.E,{value:$,className:"h-2"})]})}),(0,r.jsx)("div",{className:"grid md:grid-cols-3 gap-4 mb-8",children:O.map(n=>(0,r.jsx)(o.Zb,{className:"relative border-2 transition-all cursor-pointer ".concat(n.id===e?"border-blue-500 bg-blue-50/80":s.includes(n.id)?"border-green-500 bg-green-50/80":"border-gray-200 bg-white/60"),onClick:()=>t(n.id),children:(0,r.jsx)(o.Ol,{className:"pb-3",children:(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("div",{className:"p-2 rounded-lg ".concat(n.id===e?"bg-blue-500 text-white":s.includes(n.id)?"bg-green-500 text-white":"bg-gray-100 text-gray-600"),children:s.includes(n.id)?(0,r.jsx)(p.Z,{className:"h-6 w-6"}):n.icon}),(0,r.jsxs)("div",{children:[(0,r.jsx)(o.ll,{className:"text-lg",children:n.title}),(0,r.jsx)(o.SZ,{className:"text-sm",children:n.description})]})]})})},n.id))}),(0,r.jsx)(o.Zb,{className:"border-0 shadow-xl bg-white/90 backdrop-blur-sm",children:(0,r.jsxs)(o.aY,{className:"pt-6",children:[1===e&&(0,r.jsx)(g.Z,{botToken:v,setBotToken:w,botUsername:y,setBotUsername:S,onValidationComplete:e=>Y(1,e)}),2===e&&(0,r.jsx)(f.Z,{onNext:T,onBack:I}),3===e&&(0,r.jsx)(N.Z,{onNext:T,onBack:I}),1===e&&(0,r.jsxs)("div",{className:"flex gap-3 pt-6 border-t mt-6",children:[(0,r.jsxs)(h.z,{variant:"outline",onClick:I,disabled:1===e,className:"flex-1",children:[(0,r.jsx)(x,{className:"mr-2 h-4 w-4"}),"Back"]}),(0,r.jsx)(h.z,{onClick:T,disabled:!s.includes(1),className:"flex-1",children:e===O.length?"Complete Setup":"Next"})]})]})}),s.length===O.length&&(0,r.jsx)(o.Zb,{className:"mt-8 border-0 shadow-lg bg-green-50/80 backdrop-blur-sm border-green-200",children:(0,r.jsx)(o.aY,{className:"pt-6",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)(p.Z,{className:"h-16 w-16 text-green-600 mx-auto mb-4"}),(0,r.jsx)("h2",{className:"text-2xl font-bold text-green-800 mb-2",children:"Setup Complete! \uD83C\uDF89"}),(0,r.jsx)("p",{className:"text-green-700 mb-4",children:"Your AI expense tracker is ready to use!"}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(h.z,{onClick:P,className:"w-full",size:"lg",children:"Go to Dashboard"}),(0,r.jsx)("p",{className:"text-xs text-green-600",children:"You'll be redirected automatically in a moment..."})]})]})})})]})]})}},99376:function(e,t,s){"use strict";var r=s(35475);s.o(r,"useRouter")&&s.d(t,{useRouter:function(){return r.useRouter}})},73966:function(e,t,s){"use strict";s.d(t,{b:function(){return a}});var r=s(2265),n=s(57437);function a(e,t=[]){let s=[],a=()=>{let t=s.map(e=>r.createContext(e));return function(s){let n=s?.[e]||t;return r.useMemo(()=>({[`__scope${e}`]:{...s,[e]:n}}),[s,n])}};return a.scopeName=e,[function(t,a){let i=r.createContext(a),l=s.length;s=[...s,a];let o=t=>{let{scope:s,children:a,...o}=t,c=s?.[e]?.[l]||i,d=r.useMemo(()=>o,Object.values(o));return(0,n.jsx)(c.Provider,{value:d,children:a})};return o.displayName=t+"Provider",[o,function(s,n){let o=n?.[e]?.[l]||i,c=r.useContext(o);if(c)return c;if(void 0!==a)return a;throw Error(`\`${s}\` must be used within \`${t}\``)}]},function(...e){let t=e[0];if(1===e.length)return t;let s=()=>{let s=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){let n=s.reduce((t,{useScope:s,scopeName:r})=>{let n=s(e)[`__scope${r}`];return{...t,...n}},{});return r.useMemo(()=>({[`__scope${t.scopeName}`]:n}),[n])}};return s.scopeName=t.scopeName,s}(a,...t)]}},66840:function(e,t,s){"use strict";s.d(t,{WV:function(){return l},jH:function(){return o}});var r=s(2265),n=s(54887),a=s(37053),i=s(57437),l=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,t)=>{let s=(0,a.Z8)(`Primitive.${t}`),n=r.forwardRef((e,r)=>{let{asChild:n,...a}=e,l=n?s:t;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,i.jsx)(l,{...a,ref:r})});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{});function o(e,t){e&&n.flushSync(()=>e.dispatchEvent(t))}}},function(e){e.O(0,[284,452,505,318,971,117,744],function(){return e(e.s=89319)}),_N_E=e.O()}]);