(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[413],{89319:function(e,t,r){Promise.resolve().then(r.bind(r,41957))},41957:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return k}});var s=r(57437),a=r(2265),n=r(99376),i=r(2141),l=r(32759),o=r(66070),c=r(35974),d=r(82222),u=r(64972),m=r(65302);let h=(0,r(39763).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);var p=r(62869),x=r(77992),g=r(140),b=r(59814),f=r(20891);function k(){let[e,t]=(0,a.useState)(1),[r,k]=(0,a.useState)([]),[v,j]=(0,a.useState)(""),[y,N]=(0,a.useState)(""),[w,S]=(0,a.useState)(null),C=(0,n.useRouter)(),{toast:E}=(0,x.pm)(),Z=(0,i.J)();(0,a.useEffect)(()=>{(async()=>{var e;let{data:{session:t}}=await Z.auth.getSession();(null==t?void 0:null===(e=t.user)||void 0===e?void 0:e.id)&&S(t.user.id)})()},[Z]);let T=[{id:1,title:"Telegram Bot",description:"Create and configure your personal expense bot",icon:(0,s.jsx)(d.Z,{className:"h-6 w-6"})},{id:2,title:"AI Configuration",description:"Connect Gemini AI for receipt processing",icon:(0,s.jsx)(u.Z,{className:"h-6 w-6"})}];(0,a.useEffect)(()=>{let e=localStorage.getItem("setup-progress");if(e)try{let r=JSON.parse(e);t(r.currentStep||1),k(r.completedSteps||[]),j(r.botToken||""),N(r.botUsername||"")}catch(e){console.error("Error loading setup progress:",e)}},[]),(0,a.useEffect)(()=>{localStorage.setItem("setup-progress",JSON.stringify({currentStep:e,completedSteps:r,botToken:v,botUsername:y}))},[e,r,v,y]);let P=()=>{e>1&&t(e-1)},_=(e,t)=>{t&&!r.includes(e)?k(t=>[...t,e]):!t&&r.includes(e)&&k(t=>t.filter(t=>t!==e))},M=async()=>{try{if(!w){E({title:"Error",description:"User not authenticated. Please sign in and try again.",variant:"destructive"});return}(await fetch("".concat("https://expenseai-production.up.railway.app","/api/bot/start"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:w})})).ok?E({title:"Setup Complete! \uD83C\uDF89",description:"Your enhanced expense tracker is ready! Now using database storage with instant commands."}):E({title:"Setup Complete! ⚠️",description:"Setup finished but bot startup had issues. Check dashboard for details.",variant:"destructive"})}catch(e){console.error("Error starting bot:",e),E({title:"Setup Complete! ⚠️",description:"Setup finished but bot startup failed. You can start it manually from dashboard.",variant:"destructive"})}localStorage.removeItem("setup-progress"),setTimeout(()=>{C.push("/dashboard")},3e3)},O=e/T.length*100;return(0,s.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-gray-900 dark:to-gray-800",children:[(0,s.jsx)("header",{className:"border-b border-gray-200 dark:border-gray-700 bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm",children:(0,s.jsx)("div",{className:"container mx-auto px-4 py-4",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(d.Z,{className:"h-8 w-8 text-blue-600 dark:text-blue-400"}),(0,s.jsx)("span",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"ExpenseAI Setup"})]}),(0,s.jsx)(g.T,{})]})})}),(0,s.jsxs)("div",{className:"container mx-auto px-4 py-8 max-w-4xl",children:[(0,s.jsx)(o.Zb,{className:"mb-8 border-0 shadow-lg bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm",children:(0,s.jsxs)(o.Ol,{children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(o.ll,{className:"text-2xl",children:"Setup Your Enhanced Expense Tracker"}),(0,s.jsx)(o.SZ,{children:"Simplified setup - now with database storage and instant commands (no Google Sheets needed!)"})]}),(0,s.jsxs)(c.C,{variant:"secondary",className:"text-sm",children:["Step ",e," of ",T.length]})]}),(0,s.jsx)(l.E,{value:O,className:"h-2"})]})}),(0,s.jsx)("div",{className:"grid md:grid-cols-2 gap-4 mb-8",children:T.map(a=>(0,s.jsx)(o.Zb,{className:"relative border-2 transition-all cursor-pointer ".concat(a.id===e?"border-blue-500 bg-blue-50/80 dark:bg-blue-900/20 dark:border-blue-400":r.includes(a.id)?"border-green-500 bg-green-50/80 dark:bg-green-900/20 dark:border-green-400":"border-gray-200 bg-white/60 dark:border-gray-600 dark:bg-gray-700/60"),onClick:()=>t(a.id),children:(0,s.jsx)(o.Ol,{className:"pb-3",children:(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)("div",{className:"p-2 rounded-lg ".concat(a.id===e?"bg-blue-500 text-white dark:bg-blue-600":r.includes(a.id)?"bg-green-500 text-white dark:bg-green-600":"bg-gray-100 text-gray-600 dark:bg-gray-600 dark:text-gray-300"),children:r.includes(a.id)?(0,s.jsx)(m.Z,{className:"h-6 w-6"}):a.icon}),(0,s.jsxs)("div",{children:[(0,s.jsx)(o.ll,{className:"text-lg",children:a.title}),(0,s.jsx)(o.SZ,{className:"text-sm",children:a.description})]})]})})},a.id))}),(0,s.jsx)(o.Zb,{className:"border-0 shadow-xl bg-white/90 dark:bg-gray-800/90 backdrop-blur-sm",children:(0,s.jsxs)(o.aY,{className:"pt-6",children:[1===e&&(0,s.jsx)(b.Z,{botToken:v,setBotToken:j,botUsername:y,setBotUsername:N,onValidationComplete:e=>_(1,e)}),2===e&&(0,s.jsx)(f.Z,{onNext:M,onBack:P}),1===e&&(0,s.jsxs)("div",{className:"flex gap-3 pt-6 border-t mt-6",children:[(0,s.jsxs)(p.z,{variant:"outline",onClick:P,disabled:1===e,className:"flex-1",children:[(0,s.jsx)(h,{className:"mr-2 h-4 w-4"}),"Back"]}),(0,s.jsx)(p.z,{onClick:()=>{r.includes(e)||k(t=>[...t,e]),e<T.length?t(e+1):M()},disabled:!r.includes(1),className:"flex-1",children:e===T.length?"Complete Setup":"Next"})]})]})}),r.length===T.length&&(0,s.jsx)(o.Zb,{className:"mt-8 border-0 shadow-lg bg-green-50/80 dark:bg-green-900/20 backdrop-blur-sm border-green-200 dark:border-green-700",children:(0,s.jsx)(o.aY,{className:"pt-6",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)(m.Z,{className:"h-16 w-16 text-green-600 dark:text-green-400 mx-auto mb-4"}),(0,s.jsx)("h2",{className:"text-2xl font-bold text-green-800 dark:text-green-200 mb-2",children:"Setup Complete! \uD83C\uDF89"}),(0,s.jsx)("p",{className:"text-green-700 dark:text-green-300 mb-4",children:"Your AI expense tracker is ready to use!"}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(p.z,{onClick:M,className:"w-full",size:"lg",children:"Go to Dashboard"}),(0,s.jsx)("p",{className:"text-xs text-green-600 dark:text-green-400",children:"You'll be redirected automatically in a moment..."})]})]})})})]})]})}},21328:function(e,t,r){"use strict";r.d(t,{F:function(){return l},ThemeProvider:function(){return i}});var s=r(57437),a=r(2265);let n=(0,a.createContext)({theme:"system",setTheme:()=>null});function i(e){let{children:t,defaultTheme:r="system",storageKey:i="expense-tracker-theme",...l}=e,[o,c]=(0,a.useState)(r),[d,u]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{var e;u(!0);let t=null===(e=localStorage)||void 0===e?void 0:e.getItem(i);t&&c(t)},[i]),(0,a.useEffect)(()=>{if(!d)return;let e=window.document.documentElement;if(e.classList.remove("light","dark"),"system"===o){let t=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";e.classList.add(t);return}e.classList.add(o)},[o,d]),(0,s.jsx)(n.Provider,{...l,value:{theme:o,setTheme:e=>{localStorage.setItem(i,e),c(e)}},children:t})}let l=()=>{let e=(0,a.useContext)(n);if(void 0===e)throw Error("useTheme must be used within a ThemeProvider");return e}},140:function(e,t,r){"use strict";r.d(t,{T:function(){return c}});var s=r(57437);r(2265);var a=r(39763);let n=(0,a.Z)("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]),i=(0,a.Z)("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);var l=r(62869),o=r(21328);function c(){let{setTheme:e,theme:t}=(0,o.F)();return(0,s.jsxs)(l.z,{variant:"ghost",size:"sm",onClick:()=>{"light"===t?e("dark"):e("light")},children:[(0,s.jsx)(n,{className:"h-4 w-4 rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0"}),(0,s.jsx)(i,{className:"absolute h-4 w-4 rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100"}),(0,s.jsx)("span",{className:"sr-only",children:"Toggle theme"})]})}},99376:function(e,t,r){"use strict";var s=r(35475);r.o(s,"usePathname")&&r.d(t,{usePathname:function(){return s.usePathname}}),r.o(s,"useRouter")&&r.d(t,{useRouter:function(){return s.useRouter}})},73966:function(e,t,r){"use strict";r.d(t,{b:function(){return i},k:function(){return n}});var s=r(2265),a=r(57437);function n(e,t){let r=s.createContext(t),n=e=>{let{children:t,...n}=e,i=s.useMemo(()=>n,Object.values(n));return(0,a.jsx)(r.Provider,{value:i,children:t})};return n.displayName=e+"Provider",[n,function(a){let n=s.useContext(r);if(n)return n;if(void 0!==t)return t;throw Error(`\`${a}\` must be used within \`${e}\``)}]}function i(e,t=[]){let r=[],n=()=>{let t=r.map(e=>s.createContext(e));return function(r){let a=r?.[e]||t;return s.useMemo(()=>({[`__scope${e}`]:{...r,[e]:a}}),[r,a])}};return n.scopeName=e,[function(t,n){let i=s.createContext(n),l=r.length;r=[...r,n];let o=t=>{let{scope:r,children:n,...o}=t,c=r?.[e]?.[l]||i,d=s.useMemo(()=>o,Object.values(o));return(0,a.jsx)(c.Provider,{value:d,children:n})};return o.displayName=t+"Provider",[o,function(r,a){let o=a?.[e]?.[l]||i,c=s.useContext(o);if(c)return c;if(void 0!==n)return n;throw Error(`\`${r}\` must be used within \`${t}\``)}]},function(...e){let t=e[0];if(1===e.length)return t;let r=()=>{let r=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){let a=r.reduce((t,{useScope:r,scopeName:s})=>{let a=r(e)[`__scope${s}`];return{...t,...a}},{});return s.useMemo(()=>({[`__scope${t.scopeName}`]:a}),[a])}};return r.scopeName=t.scopeName,r}(n,...t)]}},66840:function(e,t,r){"use strict";r.d(t,{WV:function(){return l},jH:function(){return o}});var s=r(2265),a=r(54887),n=r(37053),i=r(57437),l=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,t)=>{let r=(0,n.Z8)(`Primitive.${t}`),a=s.forwardRef((e,s)=>{let{asChild:a,...n}=e,l=a?r:t;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,i.jsx)(l,{...n,ref:s})});return a.displayName=`Primitive.${t}`,{...e,[t]:a}},{});function o(e,t){e&&a.flushSync(()=>e.dispatchEvent(t))}}},function(e){e.O(0,[284,452,385,541,971,117,744],function(){return e(e.s=89319)}),_N_E=e.O()}]);